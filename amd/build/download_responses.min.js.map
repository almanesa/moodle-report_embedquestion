{"version":3,"sources":["../src/download_responses.js"],"names":["define","$","t","SELECTOR","ATTEMPT_CHECKBOX","BUTTON_DOWNLOAD_SELECT","BUTTON_DOWNLOAD_ALL","init","totalChecked","allowDownloadAll","each","allowDownload","isAllowDownloading","prop","change","checked","element","checkBox","questionUsageMeta","val","split"],"mappings":"AAsBAA,OAAM,2CAAC,CAAC,QAAD,CAAD,CAAa,SAASC,CAAT,CAAY,CAE3B,GAAIC,CAAAA,CAAC,CAAG,CAKJC,QAAQ,CAAE,CACNC,gBAAgB,CAAE,8BADZ,CAENC,sBAAsB,CAAE,iCAFlB,CAGNC,mBAAmB,CAAE,4BAHf,CALN,CAcJC,IAAI,CAAE,eAAW,IACTC,CAAAA,CAAY,CAAG,CADN,CAETC,CAAgB,CAAG,CAFV,CAIbR,CAAC,CAACC,CAAC,CAACC,QAAF,CAAWC,gBAAZ,CAAD,CAA+BM,IAA/B,CAAoC,UAAW,CAC3C,GAAIC,CAAAA,CAAa,CAAGT,CAAC,CAACU,kBAAF,CAAqB,IAArB,CAApB,CACA,GAAID,CAAJ,CAAmB,CACfF,CAAgB,GACnB,CACJ,CALD,EAOAR,CAAC,CAACC,CAAC,CAACC,QAAF,CAAWG,mBAAZ,CAAD,CAAkCO,IAAlC,CAAuC,UAAvC,CAAmD,CAACJ,CAApD,EAEAR,CAAC,CAACC,CAAC,CAACC,QAAF,CAAWC,gBAAZ,CAAD,CAA+BU,MAA/B,CAAsC,UAAW,CAC7C,GAAIH,CAAAA,CAAa,CAAGT,CAAC,CAACU,kBAAF,CAAqB,IAArB,CAApB,CACA,GAAID,CAAJ,CAAmB,CACf,GAAI,KAAKI,OAAT,CAAkB,CACdP,CAAY,EACf,CAFD,IAEO,CACHA,CAAY,EACf,CACJ,CACDP,CAAC,CAACC,CAAC,CAACC,QAAF,CAAWE,sBAAZ,CAAD,CAAqCQ,IAArC,CAA0C,UAA1C,CAAsD,EAAiB,CAAf,CAAAL,CAAF,CAAtD,CACH,CAVD,CAWH,CAtCG,CA4CJI,kBAAkB,CAAE,4BAASI,CAAT,CAAkB,IAC9BC,CAAAA,CAAQ,CAAGhB,CAAC,CAACe,CAAD,CADkB,CAE9BE,CAAiB,CAAGD,CAAQ,CAACE,GAAT,GAAeC,KAAf,CAAqB,GAArB,CAFU,CAGlC,MAA+B,EAAxB,EAAAF,CAAiB,CAAC,CAAD,CAC3B,CAhDG,CAAR,CAmDA,MAAOhB,CAAAA,CACV,CAtDK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript for download responses event.\n *\n * @package   report_embedquestion\n * @copyright 2021 The Open University\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery'], function($) {\n\n    let t = {\n\n        /**\n         * CSS Selector.\n         */\n        SELECTOR: {\n            ATTEMPT_CHECKBOX: '[name=\"questionusageid[]\"]',\n            BUTTON_DOWNLOAD_SELECT: '#downloadselectedattemptsbutton',\n            BUTTON_DOWNLOAD_ALL: '#downloadallattemptsbutton'\n        },\n\n        /**\n         * Initialise function\n         */\n        init: function() {\n            let totalChecked = 0;\n            let allowDownloadAll = 0;\n\n            $(t.SELECTOR.ATTEMPT_CHECKBOX).each(function() {\n                let allowDownload = t.isAllowDownloading(this);\n                if (allowDownload) {\n                    allowDownloadAll = true;\n                }\n            });\n\n            $(t.SELECTOR.BUTTON_DOWNLOAD_ALL).prop('disabled', !allowDownloadAll);\n\n            $(t.SELECTOR.ATTEMPT_CHECKBOX).change(function() {\n                let allowDownload = t.isAllowDownloading(this);\n                if (allowDownload) {\n                    if (this.checked) {\n                        totalChecked++;\n                    } else {\n                        totalChecked--;\n                    }\n                }\n                $(t.SELECTOR.BUTTON_DOWNLOAD_SELECT).prop('disabled', !(totalChecked > 0));\n            });\n        },\n\n        /**\n         * Check that the element is allow to download or not\n         * @param {jquery} element Element to check\n         */\n        isAllowDownloading: function(element) {\n            let checkBox = $(element);\n            let questionUsageMeta = checkBox.val().split('-');\n            return questionUsageMeta[2] == 1;\n        }\n    };\n\n    return t;\n});\n"],"file":"download_responses.min.js"}